!function(e,t,a,n){e.fn.calendar=function(t){var o,r=e(this),i=r.selector||"",l=(new Date).getTime(),s=[],d=arguments[0],u="string"==typeof d,p=[].slice.call(arguments,1);return r.each(function(){var r,c,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.calendar.settings,t):e.extend({},e.fn.calendar.settings),m=f.className,g=f.namespace,h=f.selector,y=f.formatter,v=f.parser,D=f.metadata,b=f.error,C="."+g,w="module-"+g,M=e(this),k=M.find(h.input),x=M.find(h.popup),T=M.find(h.activator),H=this,I=M.data(w);c={initialize:function(){c.debug("Initializing calendar for",H),r=c.get.isTouch(),c.setup.popup(),c.setup.inline(),c.setup.input(),c.setup.date(),c.create.calendar(),c.bind.events(),c.instantiate()},instantiate:function(){c.verbose("Storing instance of calendar"),I=c,M.data(w,I)},destroy:function(){c.verbose("Destroying previous calendar for",H),M.removeData(w),M.unbind.events()},setup:{popup:function(){if(!f.inline&&(T.length||(T=M.children().first(),T.length))){if(e.fn.popup===n)return void c.error(b.popup);x.length||(x=e("<div/>").addClass(m.popup).prependTo(T.parent())),x.addClass(m.calendar);var t=f.onVisible,a=f.onHidden;k.length||(x.attr("tabindex","0"),t=function(){return x.focus(),f.onVisible.apply(x,arguments)},a=function(){return x.blur(),f.onHidden.apply(x,arguments)});var o=function(){return c.set.focusDate(c.get.date(),!1),c.set.mode(f.startMode||"day"),f.onShow.apply(x,arguments)},r=e.extend({},f.popupOptions,{popup:x,on:f.on,hoverable:"hover"===f.on,onShow:o,onVisible:t,onHide:f.onHide,onHidden:a});c.popup(r)}},inline:function(){(!T.length||f.inline)&&(x=e("<div/>").addClass(m.calendar).appendTo(M),k.length||x.attr("tabindex","0"))},input:function(){f.touchReadonly&&k.length&&r&&k.prop("readonly",!0)},date:function(){if(k.length){var e=k.val(),t=v.date(e,f);c.set.date(t,f.formatInput,!1)}}},create:{calendar:function(){var t,a,n,o,i,l=c.get.mode(),s=new Date,d=c.get.date(),u=c.get.focusDate(),p=u||d||f.startDate||s;p=c.helper.dateInRange(p),u=u||p;var g=p.getMinutes(),h=p.getHours(),v=p.getDate(),b=p.getMonth(),C=p.getFullYear(),w="year"===l,M="month"===l,k="day"===l,T="hour"===l,H="minute"===l,I="time"===f.type,N=k?7:T?4:3,F=7===N?"seven":4===N?"four":"three",Y=k||T?6:4,O=(new Date(C,b,1).getDay()-f.firstDayOfWeek%7+7)%7;if(!f.constantHeight&&k){var A=new Date(C,b+1,0).getDate()+O;Y=Math.ceil(A/7)}var E=w?10:M?1:0,R=k?1:0,S=T||H?1:0,P=T||H?v:1,j=new Date(C-E,b-R,P-S,h),J=new Date(C+E,b+R,P+S,h),q=w?new Date(10*Math.ceil(C/10)-9,0,0):M?new Date(C,0,0):k?new Date(C,b,0):new Date(C,b,v,-1),z=w?new Date(10*Math.ceil(C/10)+1,0,1):M?new Date(C+1,0,1):k?new Date(C,b+1,1):new Date(C,b,v+1);x.empty();var L=e("<table/>").addClass(m.table).addClass(F+" column").addClass(l).appendTo(x);if(!I||!T&&!H){var V=e("<thead/>").appendTo(L);o=e("<tr/>").appendTo(V),i=e("<th/>").attr("colspan",""+N).appendTo(o);var W=e("<span/>").addClass(m.link).appendTo(i);W.text(y.header(p,l,f));var B=I?"hour":M?f.disableYear?"day":"year":k?f.disableMonth?"year":"month":"day";W.data(D.mode,B);var U=e("<span/>").addClass(m.prev).appendTo(i);U.data(D.focusDate,j),U.toggleClass(m.disabledCell,!c.helper.isDateInRange(q,l)),e("<i/>").addClass(m.prevIcon).appendTo(U);var Q=e("<span/>").addClass(m.next).appendTo(i);if(Q.data(D.focusDate,J),Q.toggleClass(m.disabledCell,!c.helper.isDateInRange(z,l)),e("<i/>").addClass(m.nextIcon).appendTo(Q),k)for(o=e("<tr/>").appendTo(V),t=0;N>t;t++)i=e("<th/>").appendTo(o),i.text(y.dayColumnHeader((t+f.firstDayOfWeek)%7,f))}var Z=e("<tbody/>").appendTo(L);for(t=w?10*Math.ceil(C/10)-9:k?1-O:0,a=0;Y>a;a++)for(o=e("<tr/>").appendTo(Z),n=0;N>n;n++,t++){var G=w?new Date(t,b,1,h,g):M?new Date(C,t,1,h,g):k?new Date(C,b,t,h,g):T?new Date(C,b,v,t):new Date(C,b,v,h,5*t),K=w?t:M?f.text.monthsShort[t]:k?G.getDate():y.time(G,f,!0);i=e("<td/>").addClass(m.cell).appendTo(o),i.text(K),i.data(D.date,G);var X=k&&G.getMonth()!==b||!c.helper.isDateInRange(G,l),$=c.helper.dateEqual(G,u,l);i.toggleClass(m.disabledCell,X),i.toggleClass(m.focusCell,!r&&$),i.toggleClass(m.activeCell,c.helper.dateEqual(G,d,l)),T||H||i.toggleClass(m.todayCell,c.helper.dateEqual(G,s,l)),$&&c.set.focusDate(G,!1)}if(f.today){var _=e("<tr/>").appendTo(Z),ee=e("<td/>").attr("colspan",""+N).addClass(m.today).appendTo(_);ee.text(y.today(f)),ee.data(D.date,s)}}},refresh:function(){c.create.calendar()},bind:{events:function(){x.on("click"+C,c.event.click),x.on("mousedown"+C,c.event.mousedown),k.length?(k.on("input"+C,c.event.inputChange),k.on("focus"+C,c.event.inputFocus),k.on("blur"+C,c.event.inputBlur),k.on("keydown"+C,c.event.keydown)):x.on("keydown"+C,c.event.keydown)}},unbind:{events:function(){x.off(C),k.length&&k.off(C)}},event:{click:function(t){k.length&&k.focus(),t.preventDefault(),t.stopPropagation();var a=e(t.target),n=a.parent();(n.data(D.date)||n.data(D.focusDate)||n.data(D.mode))&&(a=n);var o=a.data(D.date),r=a.data(D.focusDate),i=a.data(D.mode);if(o){var l=a.hasClass(m.today);c.set.selectDate(o,l)}else r?c.set.focusDate(r):i&&c.set.mode(i)},mousedown:function(e){k.length&&e.preventDefault()},keydown:function(e){if((27===e.keyCode||9===e.keyCode)&&c.popup("hide"),c.popup("is visible"))if(37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode){var t=c.get.mode(),a="day"===t?7:"hour"===t?4:3,n=37===e.keyCode?-1:38===e.keyCode?-a:39==e.keyCode?1:a;n*="minute"===t?5:1;var o=c.get.focusDate()||c.get.date()||new Date,r=o.getFullYear()+("year"===t?n:0),i=o.getMonth()+("month"===t?n:0),l=o.getDate()+("day"===t?n:0),s=o.getHours()+("hour"===t?n:0),d=o.getMinutes()+("minute"===t?n:0),u=new Date(r,i,l,s,d);"time"===f.type&&(u=c.helper.mergeDateTime(o,u)),c.helper.isDateInRange(u,t)&&c.set.focusDate(u)}else if(13===e.keyCode){var p=c.get.focusDate();p&&c.set.selectDate(p)}(38===e.keyCode||40===e.keyCode)&&(e.preventDefault(),c.popup("show"))},inputChange:function(){var e=k.val(),t=v.date(e,f);c.set.date(t,!1)},inputFocus:function(){c.popup("show"),x.addClass(m.active)},inputBlur:function(){if(f.formatInput){var e=c.get.date(),t=y.datetime(e,f);k.val(t)}x.removeClass(m.active)}},get:{date:function(){return M.data(D.date)},focusDate:function(){return M.data(D.focusDate)},mode:function(){var t=M.data(D.mode)||f.startMode,a=c.get.validModes();return e.inArray(t,a)>=0?t:"time"===f.type?"hour":"day"},validModes:function(){var e=[];return"time"!==f.type&&(f.disableYear||e.push("year"),f.disableMonth||e.push("month"),e.push("day")),"date"!==f.type&&(e.push("hour"),f.disableMinute||e.push("minute")),e},isTouch:function(){try{return a.createEvent("TouchEvent"),!0}catch(e){return!1}}},set:{selectDate:function(e,t){var a=c.get.mode(),n=t||"minute"===a||"date"===f.type&&"day"===a||f.disableMinute&&"hour"===a;if(n){var o=c.set.date(e)===!1;!o&&f.closable&&c.popup("hide")}else{var r="year"===a?f.disableMonth?"day":"month":"month"===a?"day":"day"===a?"hour":"minute";c.set.mode(r,!1),"hour"===a||"day"===a&&c.get.date()?c.set.date(e):c.set.focusDate(e)}},date:function(e,t,a){t=t!==!1,a=a!==!1,e=c.helper.sanitiseDate(e),e=c.helper.dateInRange(e);var n=y.datetime(e,f);return a&&f.onChange.call(H,e,n)===!1?!1:(e?M.data(D.date,e):M.removeData(D.date),c.set.focusDate(e),void(t&&k.length&&k.val(n)))},focusDate:function(e,t){t=t!==!1,e=c.helper.sanitiseDate(e),e=c.helper.dateInRange(e),e?M.data(D.focusDate,e):M.removeData(D.focusDate),t&&c.create.calendar()},mode:function(e,t){t=t!==!1,e?M.data(D.mode,e):M.removeData(D.mode),t&&c.create.calendar()}},changeDate:function(e){c.set.date(e)},clear:function(){c.set.date(n)},popup:function(){return T.popup.apply(T,arguments)},helper:{sanitiseDate:function(e){return e?(e instanceof Date||(e=v.date(""+e)),isNaN(e.getTime())?n:e):n},dateDiff:function(e,t,a){a=a||"day";var n="time"===f.type,o="year"===a,r=o||"month"===a,i="minute"===a,l=i||"hour"===a;return e=new Date(n?2e3:e.getFullYear(),n?0:o?0:e.getMonth(),n?1:r?1:e.getDate(),l?e.getHours():0,i?Math.floor(e.getMinutes()/5):0),t=new Date(n?2e3:t.getFullYear(),n?0:o?0:t.getMonth(),n?1:r?1:t.getDate(),l?t.getHours():0,i?Math.floor(t.getMinutes()/5):0),t.getTime()-e.getTime()},dateEqual:function(e,t,a){return!!e&&!!t&&0===c.helper.dateDiff(e,t,a)},isDateInRange:function(e,t){return!(!e||f.minDate&&c.helper.dateDiff(e,f.minDate,t)>0||f.maxDate&&c.helper.dateDiff(f.maxDate,e,t)>0)},dateInRange:function(e){var t="time"===f.type;return e?f.minDate&&c.helper.dateDiff(e,f.minDate,"minute")>0?t?c.helper.mergeDateTime(e,f.minDate):f.minDate:f.maxDate&&c.helper.dateDiff(f.maxDate,e,"minute")>0?t?c.helper.mergeDateTime(e,f.maxDate):f.maxDate:e:e},mergeDateTime:function(e,t){return e&&t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes()):t}},setting:function(t,a){if(c.debug("Changing setting",t,a),e.isPlainObject(t))e.extend(!0,f,t);else{if(a===n)return f[t];f[t]=a}},internal:function(t,a){if(e.isPlainObject(t))e.extend(!0,c,t);else{if(a===n)return c[t];c[t]=a}},debug:function(){f.debug&&(f.performance?c.performance.log(arguments):(c.debug=Function.prototype.bind.call(console.info,console,f.name+":"),c.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?c.performance.log(arguments):(c.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),c.verbose.apply(console,arguments)))},error:function(){c.error=Function.prototype.bind.call(console.error,console,f.name+":"),c.error.apply(console,arguments)},performance:{log:function(e){var t,a,n;f.performance&&(t=(new Date).getTime(),n=l||t,a=t-n,l=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:H,"Execution Time":a})),clearTimeout(c.performance.timer),c.performance.timer=setTimeout(c.performance.display,500)},display:function(){var t=f.name+":",a=0;l=!1,clearTimeout(c.performance.timer),e.each(s,function(e,t){a+=t["Execution Time"]}),t+=" "+a+"ms",i&&(t+=" '"+i+"'"),(console.group!==n||console.table!==n)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,a,r){var i,l,s,d=I;return a=a||p,r=H||r,"string"==typeof t&&d!==n&&(t=t.split(/[\. ]/),i=t.length-1,e.each(t,function(a,o){var r=a!=i?o+t[a+1].charAt(0).toUpperCase()+t[a+1].slice(1):t;if(e.isPlainObject(d[r])&&a!=i)d=d[r];else{if(d[r]!==n)return l=d[r],!1;if(!e.isPlainObject(d[o])||a==i)return d[o]!==n?(l=d[o],!1):(c.error(b.method,t),!1);d=d[o]}})),e.isFunction(l)?s=l.apply(r,a):l!==n&&(s=l),e.isArray(o)?o.push(s):o!==n?o=[o,s]:s!==n&&(o=s),l}},u?(I===n&&c.initialize(),c.invoke(d)):(I!==n&&I.invoke("destroy"),c.initialize())}),o!==n?o:r},e.fn.calendar.settings={name:"Calendar",namespace:"calendar",debug:!1,verbose:!1,performance:!1,type:"datetime",firstDayOfWeek:0,constantHeight:!0,today:!1,closable:!0,monthFirst:!0,touchReadonly:!0,inline:!1,on:"click",startDate:!1,startMode:!1,minDate:!1,maxDate:!1,ampm:!0,disableYear:!1,disableMonth:!1,disableMinute:!1,formatInput:!0,popupOptions:{position:"bottom left",lastResort:"bottom left",prefer:"opposite"},text:{days:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM"},formatter:{header:function(e,t,a){return"year"===t?a.formatter.yearHeader(e,a):"month"===t?a.formatter.monthHeader(e,a):"day"===t?a.formatter.dayHeader(e,a):"hour"===t?a.formatter.hourHeader(e,a):a.formatter.minuteHeader(e,a)},yearHeader:function(e,t){var a=10*Math.ceil(e.getFullYear()/10);return a-9+" - "+(a+2)},monthHeader:function(e,t){return e.getFullYear()},dayHeader:function(e,t){var a=t.text.months[e.getMonth()],n=e.getFullYear();return a+" "+n},hourHeader:function(e,t){return t.formatter.date(e,t)},minuteHeader:function(e,t){return t.formatter.date(e,t)},dayColumnHeader:function(e,t){return t.text.days[e]},datetime:function(e,t){if(!e)return"";var a="time"===t.type?"":t.formatter.date(e,t),n="date"===t.type?"":t.formatter.time(e,t,!1),o="datetime"===t.type?" ":"";return a+o+n},date:function(e,t){if(!e)return"";var a=e.getDate(),n=t.text.months[e.getMonth()],o=e.getFullYear();return(t.monthFirst?n+" "+a:a+" "+n)+", "+o},time:function(e,t,a){if(!e)return"";var n=e.getHours(),o=e.getMinutes(),r="";return t.ampm&&(r=" "+(12>n?t.text.am:t.text.pm),n=0===n?12:n>12?n-12:n),n+":"+(10>o?"0":"")+o+r},today:function(e){return"date"===e.type?e.text.today:e.text.now}},parser:{date:function(t,a){if(!t)return null;if(t=(""+t).trim().toLowerCase(),0===t.length)return null;var o,r,i,l=-1,s=-1,d=-1,u=-1,p=-1,c=n,f="time"===a.type,m="date"===a.type,g=t.split(/[^A-Za-z\u00C0-\u024F]+/g),h=t.split(/[^\d:]+/g);if(!m)for(c=e.inArray(a.text.am.toLowerCase(),g)>=0?!0:e.inArray(a.text.pm.toLowerCase(),g)>=0?!1:n,o=0;o<h.length;o++){var y=h[o];if(y.indexOf(":")>=0){if(0>s||0>l){var v=y.split(":");for(i=0;i<Math.min(2,v.length);i++)r=parseInt(v[i]),isNaN(r)&&(r=0),0===i?s=r%24:l=r%60}h.splice(o,1)}}if(!f){for(o=0;o<g.length;o++){var D=g[o];if(!(D.length<=0)){for(D=D.substring(0,Math.min(D.length,3)),r=0;r<a.text.months.length;r++){var b=a.text.months[r];if(b=b.substring(0,Math.min(D.length,Math.min(b.length,3))).toLowerCase(),b===D){u=r+1;break}}if(u>=0)break}}for(o=0;o<h.length;o++)if(r=parseInt(h[o]),!isNaN(r)&&r>59){p=r,h.splice(o,1);break}if(0>u)for(o=0;o<h.length;o++)if(i=o>1||a.monthFirst?o:1===o?0:1,r=parseInt(h[i]),!isNaN(r)&&r>=1&&12>=r){u=r,h.splice(i,1);break}for(o=0;o<h.length;o++)if(r=parseInt(h[o]),!isNaN(r)&&r>=1&&31>=r){d=r,h.splice(o,1);break}if(0>p)for(o=h.length-1;o>=0;o--)if(r=parseInt(h[o]),!isNaN(r)){99>r&&(r+=2e3),p=r,h.splice(o,1);break}}if(!m){if(0>s)for(o=0;o<h.length;o++)if(r=parseInt(h[o]),!isNaN(r)&&r>=0&&23>=r){s=r,h.splice(o,1);break}if(0>l)for(o=0;o<h.length;o++)if(r=parseInt(h[o]),!isNaN(r)&&r>=0&&59>=r){l=r,h.splice(o,1);break}}if(0>l&&0>s&&0>d&&0>u&&0>p)return null;0>l&&(l=0),0>s&&(s=0),0>d&&(d=1),0>u&&(u=1),0>p&&(p=(new Date).getFullYear()),c!==n&&(c?12===s&&(s=0):12>s&&(s+=12));var C=new Date(p,u-1,d,s,l);return(C.getMonth()!==u-1||C.getFullYear()!==p)&&(C=new Date(p,u,0,s,l)),isNaN(C.getTime())?null:C}},onChange:function(e,t){return!0},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},selector:{popup:".ui.popup",input:"input",activator:"input"},regExp:{dateDelimiter:/[^\w\d]+/g},error:{popup:"UI Popup, a required component is not included in this page",method:"The method you called is not defined."},className:{calendar:"calendar",active:"active",popup:"ui popup",table:"ui celled center aligned unstackable table",prev:"prev link",next:"next link",prevIcon:"chevron left icon",nextIcon:"chevron right icon",link:"link",cell:"link",disabledCell:"disabled",activeCell:"active",focusCell:"focus",todayCell:"today",today:"today link"},metadata:{date:"date",focusDate:"focusDate",mode:"mode"}}}(jQuery,window,document);